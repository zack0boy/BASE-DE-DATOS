<header class="header">
  <img
    id="logoimage"
    src="//lms.ucm.cl/pluginfile.php/1/theme_moove/logo/1764776665/UCM%20Virtual-01%20SIN%20FONDO.png"
    class="img-fluid"
    alt="UCM Virtual"
  />

  <div class="header-actions">
    <!-- Buz贸n de mensajes -->
    <div class="message-button-group">
      <button
        class="btn-message"
        [class.has-unread]="unreadCount > 0"
        (click)="openMensajesRecibidos()"
        title="Ver mensajes recibidos"
      >
        <span class="icon"></span>
        <span *ngIf="unreadCount > 0" class="badge">{{ unreadCount }}</span>
      </button>
    </div>

    <!-- Bot贸n enviar mensaje (solo docentes) -->
    <button
      *ngIf="isDocente"
      class="btn-send-message"
      (click)="openMensajeModal()"
      title="Enviar un mensaje"
    >
      <span class="icon">锔</span>
      <span class="text">Mensaje</span>
    </button>

    <!-- Bot贸n panel admin (solo admins) -->
    <button *ngIf="isAdmin" class="btn-admin" [routerLink]="['/admin-inicio']" title="Panel administrador">
      <span class="icon"></span>
      <span class="text">Admin</span>
    </button>

    <!-- Bot贸n gestionar asignaturas (solo admins) - toggle admin mode -->
    <button *ngIf="isAdmin" class="btn-admin" (click)="toggleAdminMode()" title="Entrar/Salir modo gestor">
      <span class="icon">锔</span>
      <span class="text">{{ adminMode ? 'Salir' : 'Gestionar' }}</span>
    </button>

    <!-- Cerrar sesi贸n -->
    <a href="#" (click)="onLogout($event)">
      <button class="btn-logout">
        <span class="icon"></span>
        <span class="text">Cerrar Sesi贸n</span>
      </button>
    </a>
  </div>

  <!-- Modales -->
  <app-mensaje-modal
    [isOpen]="showMensajeModal"
    [senderId]="currentUser?.id || ''"
    [recipientId]="''"
    [recipientName]="'Docente'"
    (close)="closeMensajeModal()"
  ></app-mensaje-modal>

  <app-mensajes-recibidos-modal
    [isOpen]="showMensajesRecibidosModal"
    [usuarioId]="currentUser?.id || ''"
    (close)="closeMensajesRecibidos()"
  ></app-mensajes-recibidos-modal>
</header>
